data = sim("nonlinear_quad_plant.slx",10);
figure(1)
subplot(2,2,1)
plot(data.states.Time,data.states.Data(:,1:3),'linewidth',1)
title('Position','linewidth',2)
ylabel('Position (m)')
xlabel('Time(s)')
legend({'$x$','$y$','$z$'},'Interpreter','latex')

subplot(2,2,2)
plot(data.states.Time,data.states.Data(:,4:6),'linewidth',1)
title('Velocity','linewidth',2)
ylabel('Velocity (m/s)')
xlabel('Time(s)')
legend({'$\dot{x}$','$\dot{y}$','$\dot{z}$'},'Interpreter','latex')

subplot(2,2,3)
plot(data.states.Time,data.states.Data(:,7:9),'linewidth',1)
title('Angle','linewidth',2)
ylabel('Angle (rad)')
xlabel('Time(s)')
legend({'$\phi$','$\theta$','$\psi$'},'Interpreter','latex')

subplot(2,2,4)
plot(data.states.Time,data.states.Data(:,10:12),'linewidth',1)
title('Angular Rate','linewidth',2)
ylabel('Angle rate (rad/s)')
xlabel('Time(s)')
legend({'$\dot{\phi}$','$\dot{\theta}$','$\dot{\psi}$'},'Interpreter','latex')

figure(2) 
subplot(2,2,1)
plot(data.u1.Time,data.u1.Data,'linewidth',1)
title('Control Usage','linewidth',2)
ylabel('Torque - N/m')
xlabel('Time(s)')
subplot(2,2,1)
plot(data.u2.Time,data.u2.Data,'linewidth',1)
title('Control Usage','linewidth',2)
ylabel('Torque - N/m')
xlabel('Time(s)')
subplot(2,2,1)
plot(data.u3.Time,data.u3.Data,'linewidth',1)
title('Control Usage','linewidth',2)
ylabel('Torque - N/m')
xlabel('Time(s)')
subplot(2,2,1)
plot(data.u4.Time,data.u4.Data,'linewidth',1)
title('Control Usage','linewidth',2)
ylabel('Torque - N/m')
xlabel('Time(s)')
legend({'$u_{1}$','$u_{2}$','$u_{3}$','$u_{4}$'},'Interpreter','latex')